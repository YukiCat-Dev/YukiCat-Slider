/* 雪猫 Before&After Slider - 主题冲突修复补丁 - 防缓存版本标记: 1.0.5 */

/* !important 后再加 !important 是为了确保覆盖任何可能的优先级更高的样式 */

/* 防止主题CSS影响滑块元素 - 完全隔离 */
body .yukicat-bas-container,
html .yukicat-bas-container,
.yukicat-bas-container {
    position: relative !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow: hidden !important;
    z-index: 999 !important; /* 显著提高z-index，确保在所有元素之上 */
    box-sizing: border-box !important;
    min-height: 200px !important;
    touch-action: none !important; /* 修复移动端触摸问题 */
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    /* 强制禁用可能影响的CSS属性 */
    transform: none !important;
    transition: none !important;
    animation: none !important;
    pointer-events: auto !important;
    -webkit-transform-style: flat !important;
    transform-style: flat !important;
}

/* 确保图片正确显示 - 完全独立 */
body .yukicat-bas-layer img,
html .yukicat-bas-layer img,
.yukicat-bas-layer img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    margin: 0 !important;
    padding: 0 !important;
    max-width: none !important;
    max-height: none !important;
    min-width: 0 !important;
    min-height: 0 !important;
    box-sizing: border-box !important;
    display: block !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    transform: none !important;
    -webkit-backface-visibility: hidden !important;
    backface-visibility: hidden !important;
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    will-change: clip-path !important;
    opacity: 1 !important;
    visibility: visible !important;
    /* 禁用所有可能的特效 */
    filter: none !important;
    transition: none !important;
    animation: none !important;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}

/* 修复可能的z-index问题 - 极端提高z-index值 */
body .yukicat-bas-handle,
html .yukicat-bas-handle,
.yukicat-bas-handle {
    z-index: 9999 !important; /* 极高的z-index，以确保在所有主题元素之上 */
    pointer-events: auto !important;
    cursor: col-resize !important;
    touch-action: none !important;
    will-change: transform !important;
    position: absolute !important; /* 确保定位正确 */
    transform: none !important; /* 防止被主题变换影响 */
    transition: none !important;
    margin: 0 !important;
}

body .yukicat-bas-handle-button,
html .yukicat-bas-handle-button,
.yukicat-bas-handle-button {
    z-index: 10000 !important; /* 比滑块轨道更高 */
    pointer-events: auto !important;
    cursor: col-resize !important;
    touch-action: none !important;
    will-change: transform !important;
    position: absolute !important;
    transform: none !important; /* 防止被主题变换影响 */
    opacity: 1 !important;
    visibility: visible !important;
}

/* 修复图层重叠问题 */
body .yukicat-bas-layer,
html .yukicat-bas-layer {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
    touch-action: none !important;
    will-change: clip-path !important;
    box-sizing: border-box !important;
}

/* 修复在某些主题下可能出现的滑块移动问题 */
body .yukicat-bas-container.dragging,
html .yukicat-bas-container.dragging {
    pointer-events: auto !important;
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
}

/* 防止主题的transition效果影响滑块移动 */
body .yukicat-bas-layer.active,
html .yukicat-bas-layer.active,
body .yukicat-bas-layer.next,
html .yukicat-bas-layer.next {
    transition: none !important;
    opacity: 1 !important;
}

/* 确保clip-path能正常工作 */
@supports (clip-path: inset(0 0 0 0)) {
    body .yukicat-bas-layer.active.yukicat-bas-before,
    html .yukicat-bas-layer.active.yukicat-bas-before {
        clip-path: inset(0 var(--clip-right) 0 0) !important;
    }
}

/* 防止CSS变量冲突 */
body .yukicat-bas-container,
html .yukicat-bas-container {
    --clip-right: 50%;
}

/* 确保滑块在移动设备上正常工作 */
@media (max-width: 768px) {
    body .yukicat-bas-container,
    html .yukicat-bas-container {
        touch-action: none !important;
    }
}
